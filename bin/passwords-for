#!/usr/bin/env python3

from bundlewrap.repo import Repository
from os.path import realpath, dirname

import argparse

parser = argparse.ArgumentParser()
parser.add_argument('node', help='Node to generate passwords for')
args = parser.parse_args()

bw = Repository(dirname(dirname(realpath(__file__))))
node = bw.get_node(args.node)

if node.password:
    print(f"password: {node.password}")

for metadata_key in sorted([
    'users/root/password',
]):
    if value := node.metadata.get(metadata_key, None):
        print(f"{metadata_key}: {value}")